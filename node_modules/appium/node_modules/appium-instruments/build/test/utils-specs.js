require('source-map-support').install();

'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _Promise = require('babel-runtime/core-js/promise')['default'];

var _interopRequireWildcard = require('babel-runtime/helpers/interop-require-wildcard')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _this = this;

var _ = require('..');

var _teen_process = require('teen_process');

var tp = _interopRequireWildcard(_teen_process);

var _appiumXcode = require('appium-xcode');

var _appiumXcode2 = _interopRequireDefault(_appiumXcode);

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _chaiAsPromised = require('chai-as-promised');

var _chaiAsPromised2 = _interopRequireDefault(_chaiAsPromised);

var _appiumTestSupport = require('appium-test-support');

var _appiumSupport = require('appium-support');

_chai2['default'].should();
_chai2['default'].use(_chaiAsPromised2['default']);

describe('utils', function () {
  describe('getInstrumentsPath', (0, _appiumTestSupport.withMocks)({ tp: tp }, function (mocks) {
    it('should retrieve path', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.tp.expects('exec').once().returns(_Promise.resolve({ stdout: '/a/b/c/d\n', stderr: '' }));
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_.utils.getInstrumentsPath());

          case 3:
            context$3$0.sent.should.equal('/a/b/c/d');

            (0, _appiumTestSupport.verify)(mocks);

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should throw an error if cannnot find Instruments', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.tp.expects('exec').once().throws(new Error('Instruments not found'));
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_.utils.getInstrumentsPath().should.be.rejectedWith(/Could not find the instruments binary/));

          case 3:
            (0, _appiumTestSupport.verify)(mocks);

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('getAvailableDevices', (0, _appiumTestSupport.withMocks)({ tp: tp }, function (mocks) {
    it('should work for Xcode 8.1(8B62)', function callee$2$0() {
      var instrumentsOutput, devices;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            instrumentsOutput = 'Known Devices:\ngalaxy [D633B2E7-6A48-5B2C-B9E4-A1525D3F1155]\nAngel (10.1.1) [xxxx]\nApple TV 1080p (10.0) [70D6BCBA-FCAD-4BBA-ADE9-B71757F4261F] (Simulator)\nApple Watch - 42mm (3.1) [C0E1D6CC-F1C8-4223-AC71-BB8A5182A1A8] (Simulator)\niPad 2 (9.3) [74266576-7E47-4BCB-B0D9-B11133B06A77] (Simulator)\niPad Air (10.1) [8B3934DB-350A-44A0-A8E2-1BC83E346309] (Simulator)\niPad Air 2 (10.1) [D9C1D938-D06D-4CDA-AB59-E16DC30ABD03] (Simulator)\niPad Pro (12.9 inch) (10.1) [9E0F7B13-1BCE-4E7C-9A89-8B19F9B99223] (Simulator)\niPad Pro (9.3) [B02F8899-AF72-40EA-B925-149B22BB72B2] (Simulator)\niPad Pro (9.7 inch) (10.1) [D4E6E5BC-F17F-4088-8FD4-58F07ECC6349] (Simulator)\niPad Retina (10.1) [2B6F522D-B7EA-4F74-811A-DB70B4E7CC7C] (Simulator)\niPad Retina (9.3) [EEAB60FD-3F39-43FE-B8DF-C1097CB22066] (Simulator)\niPhone 4s (9.3) [D61E60EE-25A8-49FA-ADEF-C05F7B737D1E] (Simulator)\niPhone 5 (10.1) [271D45F7-34F5-4F76-8E40-951842CF8F51] (Simulator)\niPhone 5 (9.3) [BF101A98-9FCF-4A4A-8484-F7FF1D575170] (Simulator)\niPhone 5s (10.1) [36F901CC-C539-442E-AEA6-CE87346CA8D7] (Simulator)\niPhone 5s (9.3) [D5C1064D-9543-4484-994E-4D1191587D3E] (Simulator)\niPhone 6 (10.1) [A9672FEC-2E64-4717-8DA1-3538751CCA8A] (Simulator)\niPhone 6 (9.3) [A65D1276-D09E-416A-9B55-C1FF91BE66B5] (Simulator)\niPhone 6 Plus (10.1) [58F617A9-C5F3-4AD0-A35C-F413F757645D] (Simulator)\niPhone 6 Plus (9.3) [805C5E84-CFF6-4E8B-A396-5A5EFBE93551] (Simulator)\niPhone 6s (10.1) [B760E290-B16D-44B9-ACBA-B3088E3FDE7A] (Simulator)\niPhone 6s (9.3) [FC002921-2164-4CEC-B131-CAC308EDD66A] (Simulator)\niPhone 6s Plus (10.1) [8D28052A-4694-4F3A-A988-37D2CC1EDBFC] (Simulator)\niPhone 6s Plus (9.3) [528BA7BD-887B-48EF-92AB-C1E1867C6970] (Simulator)\niPhone 7 (10.1) [F127C749-B3C8-467C-A6A2-1C556F66B1E9] (Simulator)\niPhone 7 (10.1) + Apple Watch Series 2 - 38mm (3.1) [FDBC436C-88D5-4B5D-ABD6-857D5B26C895] (Simulator)\niPhone 7 Plus (10.1) [70AE2D72-BF88-4033-B21E-838185E0EC3E] (Simulator)\niPhone 7 Plus (10.1) + Apple Watch Series 2 - 42mm (3.1) [368E0E6A-DBB0-4272-B242-B8031739E9A8] (Simulator)\niPhone SE (10.1) [1711A8A4-8733-4B37-BBCB-777F6A5B544B] (Simulator)';
            devices = ['Angel (10.1.1) [xxxx]', 'Apple TV 1080p (10.0) [70D6BCBA-FCAD-4BBA-ADE9-B71757F4261F] (Simulator)', 'Apple Watch - 42mm (3.1) [C0E1D6CC-F1C8-4223-AC71-BB8A5182A1A8] (Simulator)', 'iPad 2 (9.3) [74266576-7E47-4BCB-B0D9-B11133B06A77] (Simulator)', 'iPad Air (10.1) [8B3934DB-350A-44A0-A8E2-1BC83E346309] (Simulator)', 'iPad Air 2 (10.1) [D9C1D938-D06D-4CDA-AB59-E16DC30ABD03] (Simulator)', 'iPad Pro (12.9 inch) (10.1) [9E0F7B13-1BCE-4E7C-9A89-8B19F9B99223] (Simulator)', 'iPad Pro (9.3) [B02F8899-AF72-40EA-B925-149B22BB72B2] (Simulator)', 'iPad Pro (9.7 inch) (10.1) [D4E6E5BC-F17F-4088-8FD4-58F07ECC6349] (Simulator)', 'iPad Retina (10.1) [2B6F522D-B7EA-4F74-811A-DB70B4E7CC7C] (Simulator)', 'iPad Retina (9.3) [EEAB60FD-3F39-43FE-B8DF-C1097CB22066] (Simulator)', 'iPhone 4s (9.3) [D61E60EE-25A8-49FA-ADEF-C05F7B737D1E] (Simulator)', 'iPhone 5 (10.1) [271D45F7-34F5-4F76-8E40-951842CF8F51] (Simulator)', 'iPhone 5 (9.3) [BF101A98-9FCF-4A4A-8484-F7FF1D575170] (Simulator)', 'iPhone 5s (10.1) [36F901CC-C539-442E-AEA6-CE87346CA8D7] (Simulator)', 'iPhone 5s (9.3) [D5C1064D-9543-4484-994E-4D1191587D3E] (Simulator)', 'iPhone 6 (10.1) [A9672FEC-2E64-4717-8DA1-3538751CCA8A] (Simulator)', 'iPhone 6 (9.3) [A65D1276-D09E-416A-9B55-C1FF91BE66B5] (Simulator)', 'iPhone 6 Plus (10.1) [58F617A9-C5F3-4AD0-A35C-F413F757645D] (Simulator)', 'iPhone 6 Plus (9.3) [805C5E84-CFF6-4E8B-A396-5A5EFBE93551] (Simulator)', 'iPhone 6s (10.1) [B760E290-B16D-44B9-ACBA-B3088E3FDE7A] (Simulator)', 'iPhone 6s (9.3) [FC002921-2164-4CEC-B131-CAC308EDD66A] (Simulator)', 'iPhone 6s Plus (10.1) [8D28052A-4694-4F3A-A988-37D2CC1EDBFC] (Simulator)', 'iPhone 6s Plus (9.3) [528BA7BD-887B-48EF-92AB-C1E1867C6970] (Simulator)', 'iPhone 7 (10.1) [F127C749-B3C8-467C-A6A2-1C556F66B1E9] (Simulator)', 'iPhone 7 (10.1) + Apple Watch Series 2 - 38mm (3.1) [FDBC436C-88D5-4B5D-ABD6-857D5B26C895] (Simulator)', 'iPhone 7 Plus (10.1) [70AE2D72-BF88-4033-B21E-838185E0EC3E] (Simulator)', 'iPhone 7 Plus (10.1) + Apple Watch Series 2 - 42mm (3.1) [368E0E6A-DBB0-4272-B242-B8031739E9A8] (Simulator)', 'iPhone SE (10.1) [1711A8A4-8733-4B37-BBCB-777F6A5B544B] (Simulator)'];

            mocks.tp.expects('exec').once().returns(_Promise.resolve({ stdout: '/a/b/c/d\n', stderr: '' }));
            mocks.tp.expects('exec').once().returns(_Promise.resolve({ stdout: instrumentsOutput, stderr: '' }));
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(_.utils.getAvailableDevices());

          case 6:
            context$3$0.t0 = devices;
            context$3$0.sent.should.deep.equal(context$3$0.t0);

            (0, _appiumTestSupport.verify)(mocks);

          case 9:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });

    it('should work for Xcode 7.3', function callee$2$0() {
      var instrumentsOutput, devices;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            instrumentsOutput = 'Known Devices:\nINsaikrisv [C8476FF9-9BC4-5E52-AE3D-536A2E85D43B]\nAppiumParallel1 (9.2) [0120C306-95C1-4196-BC13-4196105EBEF9]\nApple TV 1080p (9.1) [C5957108-6BA4-4A98-9A83-4BED47EFF1BC]\niPad 2 (8.4) [B45264A0-551C-41A5-A636-8211C05D8003] (Simulator)\niPad 2 (9.2) [4444EB1E-BA48-4DFA-B16C-777171FCF3BC] (Simulator)\niPad Air (8.4) [F26279E7-8BAF-4D7B-ABFE-08D1AC364DCF] (Simulator)';
            devices = ['AppiumParallel1 (9.2) [0120C306-95C1-4196-BC13-4196105EBEF9]', 'Apple TV 1080p (9.1) [C5957108-6BA4-4A98-9A83-4BED47EFF1BC]', 'iPad 2 (8.4) [B45264A0-551C-41A5-A636-8211C05D8003] (Simulator)', 'iPad 2 (9.2) [4444EB1E-BA48-4DFA-B16C-777171FCF3BC] (Simulator)', 'iPad Air (8.4) [F26279E7-8BAF-4D7B-ABFE-08D1AC364DCF] (Simulator)'];

            mocks.tp.expects('exec').once().returns(_Promise.resolve({ stdout: '/a/b/c/d\n', stderr: '' }));
            mocks.tp.expects('exec').once().returns(_Promise.resolve({ stdout: instrumentsOutput, stderr: '' }));
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(_.utils.getAvailableDevices());

          case 6:
            context$3$0.t0 = devices;
            context$3$0.sent.should.deep.equal(context$3$0.t0);

            (0, _appiumTestSupport.verify)(mocks);

          case 9:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should work for Xcode 7.0-7.2', function callee$2$0() {
      var instrumentsOutput, devices;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            instrumentsOutput = 'Known Devices:\nINsaikrisv [C8476FF9-9BC4-5E52-AE3D-536A2E85D43B]\nAppiumParallel1 (9.2) [0120C306-95C1-4196-BC13-4196105EBEF9]\nApple TV 1080p (9.1) [C5957108-6BA4-4A98-9A83-4BED47EFF1BC]\niPad 2 (8.4) [B45264A0-551C-41A5-A636-8211C05D8003]\niPad 2 (9.2) [4444EB1E-BA48-4DFA-B16C-777171FCF3BC]\niPad Air (8.4) [F26279E7-8BAF-4D7B-ABFE-08D1AC364DCF]';
            devices = ['AppiumParallel1 (9.2) [0120C306-95C1-4196-BC13-4196105EBEF9]', 'Apple TV 1080p (9.1) [C5957108-6BA4-4A98-9A83-4BED47EFF1BC]', 'iPad 2 (8.4) [B45264A0-551C-41A5-A636-8211C05D8003]', 'iPad 2 (9.2) [4444EB1E-BA48-4DFA-B16C-777171FCF3BC]', 'iPad Air (8.4) [F26279E7-8BAF-4D7B-ABFE-08D1AC364DCF]'];

            mocks.tp.expects('exec').once().returns(_Promise.resolve({ stdout: '/a/b/c/d\n', stderr: '' }));
            mocks.tp.expects('exec').once().returns(_Promise.resolve({ stdout: instrumentsOutput, stderr: '' }));
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(_.utils.getAvailableDevices());

          case 6:
            context$3$0.t0 = devices;
            context$3$0.sent.should.deep.equal(context$3$0.t0);

            (0, _appiumTestSupport.verify)(mocks);

          case 9:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should throw an error when Instruments fails', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.tp.expects('exec').once().returns(_Promise.resolve({ stdout: '/a/b/c/d\n', stderr: '' }));
            mocks.tp.expects('exec').once().throws(new Error('Instruments failed'));
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(_.utils.getAvailableDevices().should.be.rejectedWith(/Failed getting devices, err: Error: Instruments failed./));

          case 4:
            (0, _appiumTestSupport.verify)(mocks);

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('killAllInstruments', (0, _appiumTestSupport.withMocks)({ tp: tp }, function (mocks) {
    it('should work', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.tp.expects('exec').once().returns(_Promise.resolve({ stdout: '', stderr: '' }));
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_.utils.killAllInstruments());

          case 3:
            (0, _appiumTestSupport.verify)(mocks);

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('cleanAllTraces', (0, _appiumTestSupport.withMocks)({ fs: _appiumSupport.fs }, function (mocks) {
    (0, _appiumTestSupport.stubEnv)();
    it('should work', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            process.env.CLEAN_TRACES = 1;
            mocks.fs.expects('rimraf').once().returns(_Promise.resolve({ stdout: '', stderr: '' }));
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(_.utils.cleanAllTraces());

          case 4:
            (0, _appiumTestSupport.verify)(mocks);

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('parseLaunchTimeout', function () {
    (0, _appiumTestSupport.stubEnv)();
    it('should work', function () {
      _.utils.parseLaunchTimeout(90000).should.deep.equal({
        global: 90000 });
      _.utils.parseLaunchTimeout('90000').should.deep.equal({
        global: 90000 });
      _.utils.parseLaunchTimeout({ global: 90000, afterLaunch: 30000 }).should.deep.equal({
        global: 90000, afterLaunch: 30000 });
      _.utils.parseLaunchTimeout('{"global": 90000, "afterLaunch": 30000}').should.deep.equal({
        global: 90000, afterLaunch: 30000 });
    });
    it('should work with invalid JSON', function () {
      _.utils.parseLaunchTimeout('x').should.equal('x');
    });
  });
  describe('getIwdPath', (0, _appiumTestSupport.withMocks)({ fs: _appiumSupport.fs }, function (mocks) {
    it('should work when path is found', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.fs.expects('exists').once().returns(_Promise.resolve(true));
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_.utils.getIwdPath('10'));

          case 3:
            context$3$0.sent.should.match(/.*thirdparty\/iwd10/);

            (0, _appiumTestSupport.verify)(mocks);

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should work when path is not found', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.fs.expects('exists').once().returns(_Promise.resolve(false));
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_.utils.getIwdPath('10'));

          case 3:
            context$3$0.sent.should.match(/.*thirdparty\/iwd/);

            (0, _appiumTestSupport.verify)(mocks);

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));

  describe('quickLaunch', (0, _appiumTestSupport.withMocks)({ fs: _appiumSupport.fs, tp: tp }, function (mocks) {
    it('should remove trace directory', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.fs.expects('rimraf').once().returns(_Promise.resolve());
            mocks.tp.expects('exec').once().withArgs('xcrun').returns(_Promise.resolve({ stdout: '', stderr: '' }));
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(_.utils.quickLaunch());

          case 4:
            (0, _appiumTestSupport.verify)(mocks);

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));

  describe('quickInstruments', (0, _appiumTestSupport.withMocks)({ xcode: _appiumXcode2['default'] }, function (mocks) {
    it('should create an Instruments object', function callee$2$0() {
      var inst;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(_.utils.quickInstruments({
              xcodeTraceTemplatePath: '/some/path'
            }));

          case 2:
            inst = context$3$0.sent;

            inst.should.be.an['instanceof'](_.Instruments);

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });

    it('should get xcode trace template if none supplied', function callee$2$0() {
      var inst;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.xcode.expects('getAutomationTraceTemplatePath').once().returns(_Promise.resolve('/some/path'));
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_.utils.quickInstruments());

          case 3:
            inst = context$3$0.sent;

            inst.template.should.equal('/some/path');

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,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QUk7O0FBR1IsZ0JBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEVBQUUsY0FBVyxlQUFhLENBQUM7Ozs7Ozs7S0FDM0MsQ0FBQyxDQUFDOztBQUVILE1BQUUsQ0FBQyxrREFBa0QsRUFBRTtVQUtqRCxJQUFJOzs7O0FBSlIsaUJBQUssQ0FBQyxLQUFLLENBQ1IsT0FBTyxDQUFDLGdDQUFnQyxDQUFDLENBQ3pDLElBQUksRUFBRSxDQUNOLE9BQU8sQ0FBQyxTQUFRLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDOzs2Q0FDekIsUUFBTSxnQkFBZ0IsRUFBRTs7O0FBQXJDLGdCQUFJOztBQUNSLGdCQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUM7Ozs7Ozs7S0FDMUMsQ0FBQyxDQUFDO0dBQ0osQ0FBQyxDQUFDLENBQUM7Q0FDTCxDQUFDLENBQUMiLCJmaWxlIjoidGVzdC91dGlscy1zcGVjcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHRyYW5zcGlsZTptb2NoYVxuXG5pbXBvcnQgeyB1dGlscywgSW5zdHJ1bWVudHMgfSBmcm9tICcuLic7XG5pbXBvcnQgKiBhcyB0cCBmcm9tICd0ZWVuX3Byb2Nlc3MnO1xuaW1wb3J0IHhjb2RlIGZyb20gJ2FwcGl1bS14Y29kZSc7XG5pbXBvcnQgY2hhaSBmcm9tICdjaGFpJztcbmltcG9ydCBjaGFpQXNQcm9taXNlZCBmcm9tICdjaGFpLWFzLXByb21pc2VkJztcbmltcG9ydCB7IHdpdGhNb2NrcywgdmVyaWZ5LCBzdHViRW52IH0gZnJvbSAnYXBwaXVtLXRlc3Qtc3VwcG9ydCc7XG5pbXBvcnQgeyBmcyB9IGZyb20gJ2FwcGl1bS1zdXBwb3J0JztcblxuXG5jaGFpLnNob3VsZCgpO1xuY2hhaS51c2UoY2hhaUFzUHJvbWlzZWQpO1xuXG5kZXNjcmliZSgndXRpbHMnLCAoKSA9PiB7XG4gIGRlc2NyaWJlKCdnZXRJbnN0cnVtZW50c1BhdGgnLCB3aXRoTW9ja3Moe3RwfSwgKG1vY2tzKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBwYXRoJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MudHBcbiAgICAgICAgLmV4cGVjdHMoJ2V4ZWMnKVxuICAgICAgICAub25jZSgpXG4gICAgICAgIC5yZXR1cm5zKFByb21pc2UucmVzb2x2ZSh7c3Rkb3V0OiAnL2EvYi9jL2RcXG4nLCBzdGRlcnI6JycgfSkpO1xuICAgICAgKGF3YWl0IHV0aWxzLmdldEluc3RydW1lbnRzUGF0aCgpKS5zaG91bGQuZXF1YWwoJy9hL2IvYy9kJyk7XG4gICAgICB2ZXJpZnkobW9ja3MpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgdGhyb3cgYW4gZXJyb3IgaWYgY2Fubm5vdCBmaW5kIEluc3RydW1lbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MudHBcbiAgICAgICAgLmV4cGVjdHMoJ2V4ZWMnKVxuICAgICAgICAub25jZSgpXG4gICAgICAgIC50aHJvd3MobmV3IEVycm9yKCdJbnN0cnVtZW50cyBub3QgZm91bmQnKSk7XG4gICAgICBhd2FpdCB1dGlscy5nZXRJbnN0cnVtZW50c1BhdGgoKS5zaG91bGQuYmUucmVqZWN0ZWRXaXRoKC9Db3VsZCBub3QgZmluZCB0aGUgaW5zdHJ1bWVudHMgYmluYXJ5Lyk7XG4gICAgICB2ZXJpZnkobW9ja3MpO1xuICAgIH0pO1xuICB9KSk7XG4gIGRlc2NyaWJlKCdnZXRBdmFpbGFibGVEZXZpY2VzJywgd2l0aE1vY2tzKHt0cH0sIChtb2NrcykgPT4ge1xuICAgIGl0KCdzaG91bGQgd29yayBmb3IgWGNvZGUgOC4xKDhCNjIpJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IGluc3RydW1lbnRzT3V0cHV0ID0gYEtub3duIERldmljZXM6XG5nYWxheHkgW0Q2MzNCMkU3LTZBNDgtNUIyQy1COUU0LUExNTI1RDNGMTE1NV1cbkFuZ2VsICgxMC4xLjEpIFt4eHh4XVxuQXBwbGUgVFYgMTA4MHAgKDEwLjApIFs3MEQ2QkNCQS1GQ0FELTRCQkEtQURFOS1CNzE3NTdGNDI2MUZdIChTaW11bGF0b3IpXG5BcHBsZSBXYXRjaCAtIDQybW0gKDMuMSkgW0MwRTFENkNDLUYxQzgtNDIyMy1BQzcxLUJCOEE1MTgyQTFBOF0gKFNpbXVsYXRvcilcbmlQYWQgMiAoOS4zKSBbNzQyNjY1NzYtN0U0Ny00QkNCLUIwRDktQjExMTMzQjA2QTc3XSAoU2ltdWxhdG9yKVxuaVBhZCBBaXIgKDEwLjEpIFs4QjM5MzREQi0zNTBBLTQ0QTAtQThFMi0xQkM4M0UzNDYzMDldIChTaW11bGF0b3IpXG5pUGFkIEFpciAyICgxMC4xKSBbRDlDMUQ5MzgtRDA2RC00Q0RBLUFCNTktRTE2REMzMEFCRDAzXSAoU2ltdWxhdG9yKVxuaVBhZCBQcm8gKDEyLjkgaW5jaCkgKDEwLjEpIFs5RTBGN0IxMy0xQkNFLTRFN0MtOUE4OS04QjE5RjlCOTkyMjNdIChTaW11bGF0b3IpXG5pUGFkIFBybyAoOS4zKSBbQjAyRjg4OTktQUY3Mi00MEVBLUI5MjUtMTQ5QjIyQkI3MkIyXSAoU2ltdWxhdG9yKVxuaVBhZCBQcm8gKDkuNyBpbmNoKSAoMTAuMSkgW0Q0RTZFNUJDLUYxN0YtNDA4OC04RkQ0LTU4RjA3RUNDNjM0OV0gKFNpbXVsYXRvcilcbmlQYWQgUmV0aW5hICgxMC4xKSBbMkI2RjUyMkQtQjdFQS00Rjc0LTgxMUEtREI3MEI0RTdDQzdDXSAoU2ltdWxhdG9yKVxuaVBhZCBSZXRpbmEgKDkuMykgW0VFQUI2MEZELTNGMzktNDNGRS1COERGLUMxMDk3Q0IyMjA2Nl0gKFNpbXVsYXRvcilcbmlQaG9uZSA0cyAoOS4zKSBbRDYxRTYwRUUtMjVBOC00OUZBLUFERUYtQzA1RjdCNzM3RDFFXSAoU2ltdWxhdG9yKVxuaVBob25lIDUgKDEwLjEpIFsyNzFENDVGNy0zNEY1LTRGNzYtOEU0MC05NTE4NDJDRjhGNTFdIChTaW11bGF0b3IpXG5pUGhvbmUgNSAoOS4zKSBbQkYxMDFBOTgtOUZDRi00QTRBLTg0ODQtRjdGRjFENTc1MTcwXSAoU2ltdWxhdG9yKVxuaVBob25lIDVzICgxMC4xKSBbMzZGOTAxQ0MtQzUzOS00NDJFLUFFQTYtQ0U4NzM0NkNBOEQ3XSAoU2ltdWxhdG9yKVxuaVBob25lIDVzICg5LjMpIFtENUMxMDY0RC05NTQzLTQ0ODQtOTk0RS00RDExOTE1ODdEM0VdIChTaW11bGF0b3IpXG5pUGhvbmUgNiAoMTAuMSkgW0E5NjcyRkVDLTJFNjQtNDcxNy04REExLTM1Mzg3NTFDQ0E4QV0gKFNpbXVsYXRvcilcbmlQaG9uZSA2ICg5LjMpIFtBNjVEMTI3Ni1EMDlFLTQxNkEtOUI1NS1DMUZGOTFCRTY2QjVdIChTaW11bGF0b3IpXG5pUGhvbmUgNiBQbHVzICgxMC4xKSBbNThGNjE3QTktQzVGMy00QUQwLUEzNUMtRjQxM0Y3NTc2NDVEXSAoU2ltdWxhdG9yKVxuaVBob25lIDYgUGx1cyAoOS4zKSBbODA1QzVFODQtQ0ZGNi00RThCLUEzOTYtNUE1RUZCRTkzNTUxXSAoU2ltdWxhdG9yKVxuaVBob25lIDZzICgxMC4xKSBbQjc2MEUyOTAtQjE2RC00NEI5LUFDQkEtQjMwODhFM0ZERTdBXSAoU2ltdWxhdG9yKVxuaVBob25lIDZzICg5LjMpIFtGQzAwMjkyMS0yMTY0LTRDRUMtQjEzMS1DQUMzMDhFREQ2NkFdIChTaW11bGF0b3IpXG5pUGhvbmUgNnMgUGx1cyAoMTAuMSkgWzhEMjgwNTJBLTQ2OTQtNEYzQS1BOTg4LTM3RDJDQzFFREJGQ10gKFNpbXVsYXRvcilcbmlQaG9uZSA2cyBQbHVzICg5LjMpIFs1MjhCQTdCRC04ODdCLTQ4RUYtOTJBQi1DMUUxODY3QzY5NzBdIChTaW11bGF0b3IpXG5pUGhvbmUgNyAoMTAuMSkgW0YxMjdDNzQ5LUIzQzgtNDY3Qy1BNkEyLTFDNTU2RjY2QjFFOV0gKFNpbXVsYXRvcilcbmlQaG9uZSA3ICgxMC4xKSArIEFwcGxlIFdhdGNoIFNlcmllcyAyIC0gMzhtbSAoMy4xKSBbRkRCQzQzNkMtODhENS00QjVELUFCRDYtODU3RDVCMjZDODk1XSAoU2ltdWxhdG9yKVxuaVBob25lIDcgUGx1cyAoMTAuMSkgWzcwQUUyRDcyLUJGODgtNDAzMy1CMjFFLTgzODE4NUUwRUMzRV0gKFNpbXVsYXRvcilcbmlQaG9uZSA3IFBsdXMgKDEwLjEpICsgQXBwbGUgV2F0Y2ggU2VyaWVzIDIgLSA0Mm1tICgzLjEpIFszNjhFMEU2QS1EQkIwLTQyNzItQjI0Mi1CODAzMTczOUU5QThdIChTaW11bGF0b3IpXG5pUGhvbmUgU0UgKDEwLjEpIFsxNzExQThBNC04NzMzLTRCMzctQkJDQi03NzdGNkE1QjU0NEJdIChTaW11bGF0b3IpYDtcbiAgICAgIGxldCBkZXZpY2VzID0gW1xuICAgICAgICAnQW5nZWwgKDEwLjEuMSkgW3h4eHhdJyxcbiAgICAgICAgJ0FwcGxlIFRWIDEwODBwICgxMC4wKSBbNzBENkJDQkEtRkNBRC00QkJBLUFERTktQjcxNzU3RjQyNjFGXSAoU2ltdWxhdG9yKScsXG4gICAgICAgICdBcHBsZSBXYXRjaCAtIDQybW0gKDMuMSkgW0MwRTFENkNDLUYxQzgtNDIyMy1BQzcxLUJCOEE1MTgyQTFBOF0gKFNpbXVsYXRvciknLFxuICAgICAgICAnaVBhZCAyICg5LjMpIFs3NDI2NjU3Ni03RTQ3LTRCQ0ItQjBEOS1CMTExMzNCMDZBNzddIChTaW11bGF0b3IpJyxcbiAgICAgICAgJ2lQYWQgQWlyICgxMC4xKSBbOEIzOTM0REItMzUwQS00NEEwLUE4RTItMUJDODNFMzQ2MzA5XSAoU2ltdWxhdG9yKScsXG4gICAgICAgICdpUGFkIEFpciAyICgxMC4xKSBbRDlDMUQ5MzgtRDA2RC00Q0RBLUFCNTktRTE2REMzMEFCRDAzXSAoU2ltdWxhdG9yKScsXG4gICAgICAgICdpUGFkIFBybyAoMTIuOSBpbmNoKSAoMTAuMSkgWzlFMEY3QjEzLTFCQ0UtNEU3Qy05QTg5LThCMTlGOUI5OTIyM10gKFNpbXVsYXRvciknLFxuICAgICAgICAnaVBhZCBQcm8gKDkuMykgW0IwMkY4ODk5LUFGNzItNDBFQS1COTI1LTE0OUIyMkJCNzJCMl0gKFNpbXVsYXRvciknLFxuICAgICAgICAnaVBhZCBQcm8gKDkuNyBpbmNoKSAoMTAuMSkgW0Q0RTZFNUJDLUYxN0YtNDA4OC04RkQ0LTU4RjA3RUNDNjM0OV0gKFNpbXVsYXRvciknLFxuICAgICAgICAnaVBhZCBSZXRpbmEgKDEwLjEpIFsyQjZGNTIyRC1CN0VBLTRGNzQtODExQS1EQjcwQjRFN0NDN0NdIChTaW11bGF0b3IpJyxcbiAgICAgICAgJ2lQYWQgUmV0aW5hICg5LjMpIFtFRUFCNjBGRC0zRjM5LTQzRkUtQjhERi1DMTA5N0NCMjIwNjZdIChTaW11bGF0b3IpJyxcbiAgICAgICAgJ2lQaG9uZSA0cyAoOS4zKSBbRDYxRTYwRUUtMjVBOC00OUZBLUFERUYtQzA1RjdCNzM3RDFFXSAoU2ltdWxhdG9yKScsXG4gICAgICAgICdpUGhvbmUgNSAoMTAuMSkgWzI3MUQ0NUY3LTM0RjUtNEY3Ni04RTQwLTk1MTg0MkNGOEY1MV0gKFNpbXVsYXRvciknLFxuICAgICAgICAnaVBob25lIDUgKDkuMykgW0JGMTAxQTk4LTlGQ0YtNEE0QS04NDg0LUY3RkYxRDU3NTE3MF0gKFNpbXVsYXRvciknLFxuICAgICAgICAnaVBob25lIDVzICgxMC4xKSBbMzZGOTAxQ0MtQzUzOS00NDJFLUFFQTYtQ0U4NzM0NkNBOEQ3XSAoU2ltdWxhdG9yKScsXG4gICAgICAgICdpUGhvbmUgNXMgKDkuMykgW0Q1QzEwNjRELTk1NDMtNDQ4NC05OTRFLTREMTE5MTU4N0QzRV0gKFNpbXVsYXRvciknLFxuICAgICAgICAnaVBob25lIDYgKDEwLjEpIFtBOTY3MkZFQy0yRTY0LTQ3MTctOERBMS0zNTM4NzUxQ0NBOEFdIChTaW11bGF0b3IpJyxcbiAgICAgICAgJ2lQaG9uZSA2ICg5LjMpIFtBNjVEMTI3Ni1EMDlFLTQxNkEtOUI1NS1DMUZGOTFCRTY2QjVdIChTaW11bGF0b3IpJyxcbiAgICAgICAgJ2lQaG9uZSA2IFBsdXMgKDEwLjEpIFs1OEY2MTdBOS1DNUYzLTRBRDAtQTM1Qy1GNDEzRjc1NzY0NURdIChTaW11bGF0b3IpJyxcbiAgICAgICAgJ2lQaG9uZSA2IFBsdXMgKDkuMykgWzgwNUM1RTg0LUNGRjYtNEU4Qi1BMzk2LTVBNUVGQkU5MzU1MV0gKFNpbXVsYXRvciknLFxuICAgICAgICAnaVBob25lIDZzICgxMC4xKSBbQjc2MEUyOTAtQjE2RC00NEI5LUFDQkEtQjMwODhFM0ZERTdBXSAoU2ltdWxhdG9yKScsXG4gICAgICAgICdpUGhvbmUgNnMgKDkuMykgW0ZDMDAyOTIxLTIxNjQtNENFQy1CMTMxLUNBQzMwOEVERDY2QV0gKFNpbXVsYXRvciknLFxuICAgICAgICAnaVBob25lIDZzIFBsdXMgKDEwLjEpIFs4RDI4MDUyQS00Njk0LTRGM0EtQTk4OC0zN0QyQ0MxRURCRkNdIChTaW11bGF0b3IpJyxcbiAgICAgICAgJ2lQaG9uZSA2cyBQbHVzICg5LjMpIFs1MjhCQTdCRC04ODdCLTQ4RUYtOTJBQi1DMUUxODY3QzY5NzBdIChTaW11bGF0b3IpJyxcbiAgICAgICAgJ2lQaG9uZSA3ICgxMC4xKSBbRjEyN0M3NDktQjNDOC00NjdDLUE2QTItMUM1NTZGNjZCMUU5XSAoU2ltdWxhdG9yKScsXG4gICAgICAgICdpUGhvbmUgNyAoMTAuMSkgKyBBcHBsZSBXYXRjaCBTZXJpZXMgMiAtIDM4bW0gKDMuMSkgW0ZEQkM0MzZDLTg4RDUtNEI1RC1BQkQ2LTg1N0Q1QjI2Qzg5NV0gKFNpbXVsYXRvciknLFxuICAgICAgICAnaVBob25lIDcgUGx1cyAoMTAuMSkgWzcwQUUyRDcyLUJGODgtNDAzMy1CMjFFLTgzODE4NUUwRUMzRV0gKFNpbXVsYXRvciknLFxuICAgICAgICAnaVBob25lIDcgUGx1cyAoMTAuMSkgKyBBcHBsZSBXYXRjaCBTZXJpZXMgMiAtIDQybW0gKDMuMSkgWzM2OEUwRTZBLURCQjAtNDI3Mi1CMjQyLUI4MDMxNzM5RTlBOF0gKFNpbXVsYXRvciknLFxuICAgICAgICAnaVBob25lIFNFICgxMC4xKSBbMTcxMUE4QTQtODczMy00QjM3LUJCQ0ItNzc3RjZBNUI1NDRCXSAoU2ltdWxhdG9yKSdcbiAgICAgIF07XG4gICAgICBtb2Nrcy50cFxuICAgICAgICAuZXhwZWN0cygnZXhlYycpXG4gICAgICAgIC5vbmNlKClcbiAgICAgICAgLnJldHVybnMoUHJvbWlzZS5yZXNvbHZlKHtzdGRvdXQ6ICcvYS9iL2MvZFxcbicsIHN0ZGVycjonJyB9KSk7XG4gICAgICBtb2Nrcy50cFxuICAgICAgICAuZXhwZWN0cygnZXhlYycpXG4gICAgICAgIC5vbmNlKClcbiAgICAgICAgLnJldHVybnMoUHJvbWlzZS5yZXNvbHZlKHtzdGRvdXQ6IGluc3RydW1lbnRzT3V0cHV0LCBzdGRlcnI6JycgfSkpO1xuICAgICAgKGF3YWl0IHV0aWxzLmdldEF2YWlsYWJsZURldmljZXMoKSkuc2hvdWxkLmRlZXAuZXF1YWwoZGV2aWNlcyk7XG4gICAgICB2ZXJpZnkobW9ja3MpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB3b3JrIGZvciBYY29kZSA3LjMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgaW5zdHJ1bWVudHNPdXRwdXQgPSBgS25vd24gRGV2aWNlczpcbklOc2Fpa3Jpc3YgW0M4NDc2RkY5LTlCQzQtNUU1Mi1BRTNELTUzNkEyRTg1RDQzQl1cbkFwcGl1bVBhcmFsbGVsMSAoOS4yKSBbMDEyMEMzMDYtOTVDMS00MTk2LUJDMTMtNDE5NjEwNUVCRUY5XVxuQXBwbGUgVFYgMTA4MHAgKDkuMSkgW0M1OTU3MTA4LTZCQTQtNEE5OC05QTgzLTRCRUQ0N0VGRjFCQ11cbmlQYWQgMiAoOC40KSBbQjQ1MjY0QTAtNTUxQy00MUE1LUE2MzYtODIxMUMwNUQ4MDAzXSAoU2ltdWxhdG9yKVxuaVBhZCAyICg5LjIpIFs0NDQ0RUIxRS1CQTQ4LTRERkEtQjE2Qy03NzcxNzFGQ0YzQkNdIChTaW11bGF0b3IpXG5pUGFkIEFpciAoOC40KSBbRjI2Mjc5RTctOEJBRi00RDdCLUFCRkUtMDhEMUFDMzY0RENGXSAoU2ltdWxhdG9yKWA7XG4gICAgICBsZXQgZGV2aWNlcyA9IFtcbiAgICAgICAgJ0FwcGl1bVBhcmFsbGVsMSAoOS4yKSBbMDEyMEMzMDYtOTVDMS00MTk2LUJDMTMtNDE5NjEwNUVCRUY5XScsXG4gICAgICAgICdBcHBsZSBUViAxMDgwcCAoOS4xKSBbQzU5NTcxMDgtNkJBNC00QTk4LTlBODMtNEJFRDQ3RUZGMUJDXScsXG4gICAgICAgICdpUGFkIDIgKDguNCkgW0I0NTI2NEEwLTU1MUMtNDFBNS1BNjM2LTgyMTFDMDVEODAwM10gKFNpbXVsYXRvciknLFxuICAgICAgICAnaVBhZCAyICg5LjIpIFs0NDQ0RUIxRS1CQTQ4LTRERkEtQjE2Qy03NzcxNzFGQ0YzQkNdIChTaW11bGF0b3IpJyxcbiAgICAgICAgJ2lQYWQgQWlyICg4LjQpIFtGMjYyNzlFNy04QkFGLTREN0ItQUJGRS0wOEQxQUMzNjREQ0ZdIChTaW11bGF0b3IpJ1xuICAgICAgXTtcbiAgICAgIG1vY2tzLnRwXG4gICAgICAgIC5leHBlY3RzKCdleGVjJylcbiAgICAgICAgLm9uY2UoKVxuICAgICAgICAucmV0dXJucyhQcm9taXNlLnJlc29sdmUoe3N0ZG91dDogJy9hL2IvYy9kXFxuJywgc3RkZXJyOicnIH0pKTtcbiAgICAgIG1vY2tzLnRwXG4gICAgICAgIC5leHBlY3RzKCdleGVjJylcbiAgICAgICAgLm9uY2UoKVxuICAgICAgICAucmV0dXJucyhQcm9taXNlLnJlc29sdmUoe3N0ZG91dDogaW5zdHJ1bWVudHNPdXRwdXQsIHN0ZGVycjonJyB9KSk7XG4gICAgICAoYXdhaXQgdXRpbHMuZ2V0QXZhaWxhYmxlRGV2aWNlcygpKS5zaG91bGQuZGVlcC5lcXVhbChkZXZpY2VzKTtcbiAgICAgIHZlcmlmeShtb2Nrcyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCB3b3JrIGZvciBYY29kZSA3LjAtNy4yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IGluc3RydW1lbnRzT3V0cHV0ID0gYEtub3duIERldmljZXM6XG5JTnNhaWtyaXN2IFtDODQ3NkZGOS05QkM0LTVFNTItQUUzRC01MzZBMkU4NUQ0M0JdXG5BcHBpdW1QYXJhbGxlbDEgKDkuMikgWzAxMjBDMzA2LTk1QzEtNDE5Ni1CQzEzLTQxOTYxMDVFQkVGOV1cbkFwcGxlIFRWIDEwODBwICg5LjEpIFtDNTk1NzEwOC02QkE0LTRBOTgtOUE4My00QkVENDdFRkYxQkNdXG5pUGFkIDIgKDguNCkgW0I0NTI2NEEwLTU1MUMtNDFBNS1BNjM2LTgyMTFDMDVEODAwM11cbmlQYWQgMiAoOS4yKSBbNDQ0NEVCMUUtQkE0OC00REZBLUIxNkMtNzc3MTcxRkNGM0JDXVxuaVBhZCBBaXIgKDguNCkgW0YyNjI3OUU3LThCQUYtNEQ3Qi1BQkZFLTA4RDFBQzM2NERDRl1gO1xuICAgICAgbGV0IGRldmljZXMgPSBbXG4gICAgICAgICdBcHBpdW1QYXJhbGxlbDEgKDkuMikgWzAxMjBDMzA2LTk1QzEtNDE5Ni1CQzEzLTQxOTYxMDVFQkVGOV0nLFxuICAgICAgICAnQXBwbGUgVFYgMTA4MHAgKDkuMSkgW0M1OTU3MTA4LTZCQTQtNEE5OC05QTgzLTRCRUQ0N0VGRjFCQ10nLFxuICAgICAgICAnaVBhZCAyICg4LjQpIFtCNDUyNjRBMC01NTFDLTQxQTUtQTYzNi04MjExQzA1RDgwMDNdJyxcbiAgICAgICAgJ2lQYWQgMiAoOS4yKSBbNDQ0NEVCMUUtQkE0OC00REZBLUIxNkMtNzc3MTcxRkNGM0JDXScsXG4gICAgICAgICdpUGFkIEFpciAoOC40KSBbRjI2Mjc5RTctOEJBRi00RDdCLUFCRkUtMDhEMUFDMzY0RENGXSdcbiAgICAgIF07XG4gICAgICBtb2Nrcy50cFxuICAgICAgICAuZXhwZWN0cygnZXhlYycpXG4gICAgICAgIC5vbmNlKClcbiAgICAgICAgLnJldHVybnMoUHJvbWlzZS5yZXNvbHZlKHtzdGRvdXQ6ICcvYS9iL2MvZFxcbicsIHN0ZGVycjonJyB9KSk7XG4gICAgICBtb2Nrcy50cFxuICAgICAgICAuZXhwZWN0cygnZXhlYycpXG4gICAgICAgIC5vbmNlKClcbiAgICAgICAgLnJldHVybnMoUHJvbWlzZS5yZXNvbHZlKHtzdGRvdXQ6IGluc3RydW1lbnRzT3V0cHV0LCBzdGRlcnI6JycgfSkpO1xuICAgICAgKGF3YWl0IHV0aWxzLmdldEF2YWlsYWJsZURldmljZXMoKSkuc2hvdWxkLmRlZXAuZXF1YWwoZGV2aWNlcyk7XG4gICAgICB2ZXJpZnkobW9ja3MpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgdGhyb3cgYW4gZXJyb3Igd2hlbiBJbnN0cnVtZW50cyBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLnRwXG4gICAgICAgIC5leHBlY3RzKCdleGVjJylcbiAgICAgICAgLm9uY2UoKVxuICAgICAgICAucmV0dXJucyhQcm9taXNlLnJlc29sdmUoe3N0ZG91dDogJy9hL2IvYy9kXFxuJywgc3RkZXJyOicnIH0pKTtcbiAgICAgIG1vY2tzLnRwXG4gICAgICAgIC5leHBlY3RzKCdleGVjJylcbiAgICAgICAgLm9uY2UoKVxuICAgICAgICAudGhyb3dzKG5ldyBFcnJvcignSW5zdHJ1bWVudHMgZmFpbGVkJykpO1xuICAgICAgYXdhaXQgdXRpbHMuZ2V0QXZhaWxhYmxlRGV2aWNlcygpLnNob3VsZC5iZS5yZWplY3RlZFdpdGgoL0ZhaWxlZCBnZXR0aW5nIGRldmljZXMsIGVycjogRXJyb3I6IEluc3RydW1lbnRzIGZhaWxlZC4vKTtcbiAgICAgIHZlcmlmeShtb2Nrcyk7XG4gICAgfSk7XG4gIH0pKTtcbiAgZGVzY3JpYmUoJ2tpbGxBbGxJbnN0cnVtZW50cycsIHdpdGhNb2Nrcyh7dHB9LCAobW9ja3MpID0+IHtcbiAgICBpdCgnc2hvdWxkIHdvcmsnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy50cFxuICAgICAgICAuZXhwZWN0cygnZXhlYycpXG4gICAgICAgIC5vbmNlKClcbiAgICAgICAgLnJldHVybnMoUHJvbWlzZS5yZXNvbHZlKHtzdGRvdXQ6ICcnLCBzdGRlcnI6JycgfSkpO1xuICAgICAgYXdhaXQgdXRpbHMua2lsbEFsbEluc3RydW1lbnRzKCk7XG4gICAgICB2ZXJpZnkobW9ja3MpO1xuICAgIH0pO1xuICB9KSk7XG4gIGRlc2NyaWJlKCdjbGVhbkFsbFRyYWNlcycsIHdpdGhNb2Nrcyh7ZnN9LCAobW9ja3MpID0+IHtcbiAgICBzdHViRW52KCk7XG4gICAgaXQoJ3Nob3VsZCB3b3JrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcHJvY2Vzcy5lbnYuQ0xFQU5fVFJBQ0VTID0gMTtcbiAgICAgIG1vY2tzLmZzXG4gICAgICAgIC5leHBlY3RzKCdyaW1yYWYnKVxuICAgICAgICAub25jZSgpXG4gICAgICAgIC5yZXR1cm5zKFByb21pc2UucmVzb2x2ZSh7c3Rkb3V0OiAnJywgc3RkZXJyOicnIH0pKTtcbiAgICAgIGF3YWl0IHV0aWxzLmNsZWFuQWxsVHJhY2VzKCk7XG4gICAgICB2ZXJpZnkobW9ja3MpO1xuICAgIH0pO1xuICB9KSk7XG4gIGRlc2NyaWJlKCdwYXJzZUxhdW5jaFRpbWVvdXQnLCAoKSA9PiB7XG4gICAgc3R1YkVudigpO1xuICAgIGl0KCdzaG91bGQgd29yaycsICgpID0+IHtcbiAgICAgIHV0aWxzLnBhcnNlTGF1bmNoVGltZW91dCg5MDAwMCkuc2hvdWxkLmRlZXAuZXF1YWwoe1xuICAgICAgICBnbG9iYWw6IDkwMDAwIH0pO1xuICAgICAgdXRpbHMucGFyc2VMYXVuY2hUaW1lb3V0KCc5MDAwMCcpLnNob3VsZC5kZWVwLmVxdWFsKHtcbiAgICAgICAgZ2xvYmFsOiA5MDAwMCB9KTtcbiAgICAgIHV0aWxzLnBhcnNlTGF1bmNoVGltZW91dCh7Z2xvYmFsOiA5MDAwMCwgYWZ0ZXJMYXVuY2g6IDMwMDAwfSkuc2hvdWxkLmRlZXAuZXF1YWwoe1xuICAgICAgICBnbG9iYWw6IDkwMDAwLCBhZnRlckxhdW5jaDogMzAwMDAgfSk7XG4gICAgICB1dGlscy5wYXJzZUxhdW5jaFRpbWVvdXQoJ3tcImdsb2JhbFwiOiA5MDAwMCwgXCJhZnRlckxhdW5jaFwiOiAzMDAwMH0nKS5zaG91bGQuZGVlcC5lcXVhbCh7XG4gICAgICAgIGdsb2JhbDogOTAwMDAsIGFmdGVyTGF1bmNoOiAzMDAwMCB9KTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHdvcmsgd2l0aCBpbnZhbGlkIEpTT04nLCAoKSA9PiB7XG4gICAgICB1dGlscy5wYXJzZUxhdW5jaFRpbWVvdXQoJ3gnKS5zaG91bGQuZXF1YWwoJ3gnKTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdnZXRJd2RQYXRoJywgd2l0aE1vY2tzKHtmc30sIChtb2NrcykgPT4ge1xuICAgIGl0KCdzaG91bGQgd29yayB3aGVuIHBhdGggaXMgZm91bmQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5mc1xuICAgICAgICAuZXhwZWN0cygnZXhpc3RzJylcbiAgICAgICAgLm9uY2UoKVxuICAgICAgICAucmV0dXJucyhQcm9taXNlLnJlc29sdmUodHJ1ZSkpO1xuICAgICAgKGF3YWl0IHV0aWxzLmdldEl3ZFBhdGgoJzEwJykpLnNob3VsZC5tYXRjaChcbiAgICAgICAgLy4qdGhpcmRwYXJ0eVxcL2l3ZDEwLyk7XG4gICAgICB2ZXJpZnkobW9ja3MpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgd29yayB3aGVuIHBhdGggaXMgbm90IGZvdW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MuZnNcbiAgICAgICAgLmV4cGVjdHMoJ2V4aXN0cycpXG4gICAgICAgIC5vbmNlKClcbiAgICAgICAgLnJldHVybnMoUHJvbWlzZS5yZXNvbHZlKGZhbHNlKSk7XG4gICAgICAoYXdhaXQgdXRpbHMuZ2V0SXdkUGF0aCgnMTAnKSkuc2hvdWxkLm1hdGNoKFxuICAgICAgICAvLip0aGlyZHBhcnR5XFwvaXdkLyk7XG4gICAgICB2ZXJpZnkobW9ja3MpO1xuICAgIH0pO1xuICB9KSk7XG5cbiAgZGVzY3JpYmUoJ3F1aWNrTGF1bmNoJywgd2l0aE1vY2tzKHtmcywgdHB9LCAobW9ja3MpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJlbW92ZSB0cmFjZSBkaXJlY3RvcnknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5mc1xuICAgICAgICAuZXhwZWN0cygncmltcmFmJylcbiAgICAgICAgLm9uY2UoKVxuICAgICAgICAucmV0dXJucyhQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgICBtb2Nrcy50cFxuICAgICAgICAuZXhwZWN0cygnZXhlYycpXG4gICAgICAgIC5vbmNlKClcbiAgICAgICAgLndpdGhBcmdzKCd4Y3J1bicpXG4gICAgICAgIC5yZXR1cm5zKFByb21pc2UucmVzb2x2ZSh7c3Rkb3V0OiAnJywgc3RkZXJyOicnIH0pKTtcbiAgICAgIGF3YWl0IHV0aWxzLnF1aWNrTGF1bmNoKCk7XG4gICAgICB2ZXJpZnkobW9ja3MpO1xuICAgIH0pO1xuICB9KSk7XG5cbiAgZGVzY3JpYmUoJ3F1aWNrSW5zdHJ1bWVudHMnLCB3aXRoTW9ja3Moe3hjb2RlfSwgKG1vY2tzKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgYW4gSW5zdHJ1bWVudHMgb2JqZWN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IGluc3QgPSBhd2FpdCB1dGlscy5xdWlja0luc3RydW1lbnRzKHtcbiAgICAgICAgeGNvZGVUcmFjZVRlbXBsYXRlUGF0aDogJy9zb21lL3BhdGgnXG4gICAgICB9KTtcbiAgICAgIGluc3Quc2hvdWxkLmJlLmFuLmluc3RhbmNlb2YoSW5zdHJ1bWVudHMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZXQgeGNvZGUgdHJhY2UgdGVtcGxhdGUgaWYgbm9uZSBzdXBwbGllZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLnhjb2RlXG4gICAgICAgIC5leHBlY3RzKCdnZXRBdXRvbWF0aW9uVHJhY2VUZW1wbGF0ZVBhdGgnKVxuICAgICAgICAub25jZSgpXG4gICAgICAgIC5yZXR1cm5zKFByb21pc2UucmVzb2x2ZSgnL3NvbWUvcGF0aCcpKTtcbiAgICAgIGxldCBpbnN0ID0gYXdhaXQgdXRpbHMucXVpY2tJbnN0cnVtZW50cygpO1xuICAgICAgaW5zdC50ZW1wbGF0ZS5zaG91bGQuZXF1YWwoJy9zb21lL3BhdGgnKTtcbiAgICB9KTtcbiAgfSkpO1xufSk7XG4iXSwic291cmNlUm9vdCI6Ii4uLy4uIn0=
