'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _chaiAsPromised = require('chai-as-promised');

var _chaiAsPromised2 = _interopRequireDefault(_chaiAsPromised);

var _ = require('../..');

var _2 = _interopRequireDefault(_);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _libHelpersJs = require('../../lib/helpers.js');

_chai2['default'].use(_chaiAsPromised2['default']);
// change according to CI
var apiLevel = '18',
    platformVersion = '4.3',
    IME = 'com.example.android.softkeyboard/.SoftKeyboard',
    defaultIMEs = ['com.android.inputmethod.latin/.LatinIME', 'io.appium.android.ime/.UnicodeIME'],
    contactManagerPath = _path2['default'].resolve(_libHelpersJs.rootDir, 'test', 'fixtures', 'ContactManager.apk'),
    pkg = 'com.example.android.contactmanager',
    activity = 'ContactManager';
var expect = _chai2['default'].expect;

describe('adb commands', function () {
  var _this = this;

  var adb = undefined;
  this.timeout(60000);
  before(function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(_2['default'].createADB());

        case 2:
          adb = context$2$0.sent;

        case 3:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('getApiLevel should get correct api level', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(adb.getApiLevel());

        case 2:
          context$2$0.t0 = apiLevel;
          context$2$0.sent.should.equal(context$2$0.t0);

        case 4:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('getPlatformVersion should get correct platform version', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(adb.getPlatformVersion());

        case 2:
          context$2$0.t0 = platformVersion;
          context$2$0.sent.should.equal(context$2$0.t0);

        case 4:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('availableIMEs should get list of available IMEs', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(adb.availableIMEs());

        case 2:
          context$2$0.sent.should.have.length.above(0);

        case 3:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('enabledIMEs should get list of enabled IMEs', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(adb.enabledIMEs());

        case 2:
          context$2$0.sent.should.have.length.above(0);

        case 3:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('defaultIME should get default IME', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.t0 = defaultIMEs.should;
          context$2$0.next = 3;
          return _regeneratorRuntime.awrap(adb.defaultIME());

        case 3:
          context$2$0.t1 = context$2$0.sent;
          context$2$0.t0.include.call(context$2$0.t0, context$2$0.t1);

        case 5:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('enableIME and disableIME should enable and disble IME', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(adb.disableIME(IME));

        case 2:
          context$2$0.next = 4;
          return _regeneratorRuntime.awrap(adb.enabledIMEs());

        case 4:
          context$2$0.t0 = IME;
          context$2$0.sent.should.not.include(context$2$0.t0);
          context$2$0.next = 8;
          return _regeneratorRuntime.awrap(adb.enableIME(IME));

        case 8:
          context$2$0.next = 10;
          return _regeneratorRuntime.awrap(adb.enabledIMEs());

        case 10:
          context$2$0.t1 = IME;
          context$2$0.sent.should.include(context$2$0.t1);
          context$2$0.next = 14;
          return _regeneratorRuntime.awrap(adb.enabledIMEs());

        case 14:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('processExists should be able to find ui process', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(adb.processExists('com.android.systemui'));

        case 2:
          context$2$0.sent.should.be['true'];

        case 3:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('ping should return true', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(adb.ping());

        case 2:
          context$2$0.sent.should.be['true'];

        case 3:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('getPIDsByName should return pids', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(adb.getPIDsByName('m.android.phone'));

        case 2:
          context$2$0.sent.should.have.length.above(0);

        case 3:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('killProcessesByName should kill process', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(adb.install(contactManagerPath));

        case 2:
          context$2$0.next = 4;
          return _regeneratorRuntime.awrap(adb.startApp({ pkg: pkg, activity: activity }));

        case 4:
          context$2$0.next = 6;
          return _regeneratorRuntime.awrap(adb.killProcessesByName(pkg));

        case 6:
          context$2$0.next = 8;
          return _regeneratorRuntime.awrap(adb.getPIDsByName(pkg));

        case 8:
          context$2$0.sent.should.have.length(0);

        case 9:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('killProcessByPID should kill process', function callee$1$0() {
    var pids;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(adb.install(contactManagerPath));

        case 2:
          context$2$0.next = 4;
          return _regeneratorRuntime.awrap(adb.startApp({ pkg: pkg, activity: activity }));

        case 4:
          context$2$0.next = 6;
          return _regeneratorRuntime.awrap(adb.getPIDsByName(pkg));

        case 6:
          pids = context$2$0.sent;

          pids.should.have.length.above(0);
          context$2$0.next = 10;
          return _regeneratorRuntime.awrap(adb.killProcessByPID(pids[0]));

        case 10:
          context$2$0.next = 12;
          return _regeneratorRuntime.awrap(adb.getPIDsByName(pkg));

        case 12:
          context$2$0.sent.length.should.equal(0);

        case 13:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('should get device language and country', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.t0 = ['en', 'fr'].should;
          context$2$0.next = 3;
          return _regeneratorRuntime.awrap(adb.getDeviceSysLanguage());

        case 3:
          context$2$0.t1 = context$2$0.sent;
          context$2$0.t0.contain.call(context$2$0.t0, context$2$0.t1);
          context$2$0.t2 = ['US', 'EN_US', 'EN', 'FR'].should;
          context$2$0.next = 8;
          return _regeneratorRuntime.awrap(adb.getDeviceSysCountry());

        case 8:
          context$2$0.t3 = context$2$0.sent;
          context$2$0.t2.contain.call(context$2$0.t2, context$2$0.t3);

        case 10:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('should set device language and country', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(adb.setDeviceSysLanguage('fr'));

        case 2:
          context$2$0.next = 4;
          return _regeneratorRuntime.awrap(adb.setDeviceSysCountry('fr'));

        case 4:
          context$2$0.next = 6;
          return _regeneratorRuntime.awrap(adb.reboot());

        case 6:
          context$2$0.next = 8;
          return _regeneratorRuntime.awrap(adb.getDeviceSysLanguage().should.eventually.equal('fr'));

        case 8:
          context$2$0.next = 10;
          return _regeneratorRuntime.awrap(adb.getDeviceSysCountry().should.eventually.equal('FR'));

        case 10:
          context$2$0.next = 12;
          return _regeneratorRuntime.awrap(adb.setDeviceSysLanguage('en'));

        case 12:
          context$2$0.next = 14;
          return _regeneratorRuntime.awrap(adb.setDeviceSysCountry('us'));

        case 14:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('should forward the port', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(adb.forwardPort(4724, 4724));

        case 2:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('should remove forwarded port', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(adb.forwardPort(8200, 6790));

        case 2:
          context$2$0.next = 4;
          return _regeneratorRuntime.awrap(adb.adbExec(['forward', '--list']));

        case 4:
          context$2$0.sent.should.contain('tcp:8200');
          context$2$0.next = 7;
          return _regeneratorRuntime.awrap(adb.removePortForward(8200));

        case 7:
          context$2$0.next = 9;
          return _regeneratorRuntime.awrap(adb.adbExec(['forward', '--list']));

        case 9:
          context$2$0.sent.should.not.contain('tcp:8200');

        case 10:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('should start logcat from adb', function callee$1$0() {
    var logs;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(adb.startLogcat());

        case 2:
          logs = adb.logcat.getLogs();

          logs.should.have.length.above(0);
          context$2$0.next = 6;
          return _regeneratorRuntime.awrap(adb.stopLogcat());

        case 6:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  describe('app permissions', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      var _this2 = this;

      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          before(function callee$2$0() {
            var deviceApiLevel, isInstalled;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap(adb.getApiLevel());

                case 2:
                  deviceApiLevel = context$3$0.sent;

                  if (deviceApiLevel < 23) {
                    //test should skip if the device API < 23
                    this.skip();
                  }
                  context$3$0.next = 6;
                  return _regeneratorRuntime.awrap(adb.isAppInstalled('io.appium.android.apis'));

                case 6:
                  isInstalled = context$3$0.sent;

                  if (!isInstalled) {
                    context$3$0.next = 10;
                    break;
                  }

                  context$3$0.next = 10;
                  return _regeneratorRuntime.awrap(adb.uninstallApk('io.appium.android.apis'));

                case 10:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });
          it('should install and grant all permission', function callee$2$0() {
            var apiDemos, requestedPermissions;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  apiDemos = _path2['default'].resolve(_libHelpersJs.rootDir, 'test', 'fixtures', 'ApiDemos-debug.apk');
                  context$3$0.next = 3;
                  return _regeneratorRuntime.awrap(adb.install(apiDemos));

                case 3:
                  context$3$0.next = 5;
                  return _regeneratorRuntime.awrap(adb.isAppInstalled('io.appium.android.apis'));

                case 5:
                  context$3$0.sent.should.be['true'];
                  context$3$0.next = 8;
                  return _regeneratorRuntime.awrap(adb.grantAllPermissions('io.appium.android.apis'));

                case 8:
                  context$3$0.next = 10;
                  return _regeneratorRuntime.awrap(adb.getReqPermissions('io.appium.android.apis'));

                case 10:
                  requestedPermissions = context$3$0.sent;
                  context$3$0.next = 13;
                  return _regeneratorRuntime.awrap(adb.getGrantedPermissions('io.appium.android.apis'));

                case 13:
                  context$3$0.t0 = context$3$0.sent;
                  context$3$0.t1 = requestedPermissions;
                  expect(context$3$0.t0).to.have.members(context$3$0.t1);

                case 16:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, _this2);
          });
          it('should revoke permission', function callee$2$0() {
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap(adb.revokePermission('io.appium.android.apis', 'android.permission.RECEIVE_SMS'));

                case 2:
                  context$3$0.next = 4;
                  return _regeneratorRuntime.awrap(adb.getGrantedPermissions('io.appium.android.apis'));

                case 4:
                  context$3$0.t0 = context$3$0.sent;
                  context$3$0.t1 = ['android.permission.RECEIVE_SMS'];
                  expect(context$3$0.t0).to.not.have.members(context$3$0.t1);

                case 7:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, _this2);
          });
          it('should grant permission', function callee$2$0() {
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap(adb.grantPermission('io.appium.android.apis', 'android.permission.RECEIVE_SMS'));

                case 2:
                  context$3$0.next = 4;
                  return _regeneratorRuntime.awrap(adb.getGrantedPermissions('io.appium.android.apis'));

                case 4:
                  context$3$0.t0 = context$3$0.sent;
                  context$3$0.t1 = ['android.permission.RECEIVE_SMS'];
                  expect(context$3$0.t0).to.include.members(context$3$0.t1);

                case 7:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, _this2);
          });

        case 4:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
});

// cleanup
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvZnVuY3Rpb25hbC9hZGItY29tbWFuZHMtZTJlLXNwZWNzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztvQkFBaUIsTUFBTTs7Ozs4QkFDSSxrQkFBa0I7Ozs7Z0JBQzdCLE9BQU87Ozs7b0JBQ04sTUFBTTs7Ozs0QkFDQyxzQkFBc0I7O0FBRzlDLGtCQUFLLEdBQUcsNkJBQWdCLENBQUM7O0FBRXpCLElBQU0sUUFBUSxHQUFHLElBQUk7SUFDZixlQUFlLEdBQUcsS0FBSztJQUN2QixHQUFHLEdBQUcsZ0RBQWdEO0lBQ3RELFdBQVcsR0FBRyxDQUFDLHlDQUF5QyxFQUN6QyxtQ0FBbUMsQ0FBQztJQUNuRCxrQkFBa0IsR0FBRyxrQkFBSyxPQUFPLHdCQUFVLE1BQU0sRUFDZixVQUFVLEVBQUUsb0JBQW9CLENBQUM7SUFDbkUsR0FBRyxHQUFHLG9DQUFvQztJQUMxQyxRQUFRLEdBQUcsZ0JBQWdCLENBQUM7QUFDbEMsSUFBSSxNQUFNLEdBQUcsa0JBQUssTUFBTSxDQUFDOztBQUV6QixRQUFRLENBQUMsY0FBYyxFQUFFLFlBQVk7OztBQUNuQyxNQUFJLEdBQUcsWUFBQSxDQUFDO0FBQ1IsTUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNwQixRQUFNLENBQUM7Ozs7OzJDQUNPLGNBQUksU0FBUyxFQUFFOzs7QUFBM0IsYUFBRzs7Ozs7OztHQUNKLENBQUMsQ0FBQztBQUNILElBQUUsQ0FBQywwQ0FBMEMsRUFBRTs7Ozs7MkNBQ3RDLEdBQUcsQ0FBQyxXQUFXLEVBQUU7OzsyQkFBZSxRQUFROzJCQUFyQixNQUFNLENBQUMsS0FBSzs7Ozs7OztHQUN2QyxDQUFDLENBQUM7QUFDSCxJQUFFLENBQUMsd0RBQXdELEVBQUU7Ozs7OzJDQUNwRCxHQUFHLENBQUMsa0JBQWtCLEVBQUU7OzsyQkFBZSxlQUFlOzJCQUE1QixNQUFNLENBQUMsS0FBSzs7Ozs7OztHQUM5QyxDQUFDLENBQUM7QUFDSCxJQUFFLENBQUMsaURBQWlE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Q0FBQyxtQkFBbUIsQ0FBQyx3QkFBd0IsQ0FBQzs7OzttREFDdEIsR0FBRyxDQUFDLGlCQUFpQixDQUFDLHdCQUF3QixDQUFDOzs7QUFBNUUsc0NBQW9COzttREFDWCxHQUFHLENBQUMscUJBQXFCLENBQUMsd0JBQXdCLENBQUM7Ozs7bUNBQWtCLG9CQUFvQjtBQUF0Ryx3QkFBTSxpQkFBNEQsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPOzs7Ozs7O1dBQ2xGLENBQUMsQ0FBQztBQUNILFlBQUUsQ0FBQywwQkFBMEIsRUFBRTs7Ozs7bURBQ3ZCLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyx3QkFBd0IsRUFBRSxnQ0FBZ0MsQ0FBQzs7OzttREFDekUsR0FBRyxDQUFDLHFCQUFxQixDQUFDLHdCQUF3QixDQUFDOzs7O21DQUFzQixDQUFDLGdDQUFnQyxDQUFDO0FBQXhILHdCQUFNLGlCQUE0RCxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxPQUFPOzs7Ozs7O1dBQ3RGLENBQUMsQ0FBQztBQUNILFlBQUUsQ0FBQyx5QkFBeUIsRUFBRTs7Ozs7bURBQ3RCLEdBQUcsQ0FBQyxlQUFlLENBQUMsd0JBQXdCLEVBQUUsZ0NBQWdDLENBQUM7Ozs7bURBQ3hFLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyx3QkFBd0IsQ0FBQzs7OzttQ0FBcUIsQ0FBQyxnQ0FBZ0MsQ0FBQztBQUF2SCx3QkFBTSxpQkFBNEQsRUFBRSxDQUFDLE9BQU8sQ0FBQyxPQUFPOzs7Ozs7O1dBQ3JGLENBQUMsQ0FBQzs7Ozs7OztHQUNKLENBQUMsQ0FBQztDQUNKLENBQUMsQ0FBQyIsImZpbGUiOiJ0ZXN0L2Z1bmN0aW9uYWwvYWRiLWNvbW1hbmRzLWUyZS1zcGVjcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjaGFpIGZyb20gJ2NoYWknO1xuaW1wb3J0IGNoYWlBc1Byb21pc2VkIGZyb20gJ2NoYWktYXMtcHJvbWlzZWQnO1xuaW1wb3J0IEFEQiBmcm9tICcuLi8uLic7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IHJvb3REaXIgfSBmcm9tICcuLi8uLi9saWIvaGVscGVycy5qcyc7XG5cblxuY2hhaS51c2UoY2hhaUFzUHJvbWlzZWQpO1xuLy8gY2hhbmdlIGFjY29yZGluZyB0byBDSVxuY29uc3QgYXBpTGV2ZWwgPSAnMTgnLFxuICAgICAgcGxhdGZvcm1WZXJzaW9uID0gJzQuMycsXG4gICAgICBJTUUgPSAnY29tLmV4YW1wbGUuYW5kcm9pZC5zb2Z0a2V5Ym9hcmQvLlNvZnRLZXlib2FyZCcsXG4gICAgICBkZWZhdWx0SU1FcyA9IFsnY29tLmFuZHJvaWQuaW5wdXRtZXRob2QubGF0aW4vLkxhdGluSU1FJyxcbiAgICAgICAgICAgICAgICAgICAgICdpby5hcHBpdW0uYW5kcm9pZC5pbWUvLlVuaWNvZGVJTUUnXSxcbiAgICAgIGNvbnRhY3RNYW5hZ2VyUGF0aCA9IHBhdGgucmVzb2x2ZShyb290RGlyLCAndGVzdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ZpeHR1cmVzJywgJ0NvbnRhY3RNYW5hZ2VyLmFwaycpLFxuICAgICAgcGtnID0gJ2NvbS5leGFtcGxlLmFuZHJvaWQuY29udGFjdG1hbmFnZXInLFxuICAgICAgYWN0aXZpdHkgPSAnQ29udGFjdE1hbmFnZXInO1xubGV0IGV4cGVjdCA9IGNoYWkuZXhwZWN0O1xuXG5kZXNjcmliZSgnYWRiIGNvbW1hbmRzJywgZnVuY3Rpb24gKCkge1xuICBsZXQgYWRiO1xuICB0aGlzLnRpbWVvdXQoNjAwMDApO1xuICBiZWZvcmUoYXN5bmMgKCkgPT4ge1xuICAgIGFkYiA9IGF3YWl0IEFEQi5jcmVhdGVBREIoKTtcbiAgfSk7XG4gIGl0KCdnZXRBcGlMZXZlbCBzaG91bGQgZ2V0IGNvcnJlY3QgYXBpIGxldmVsJywgYXN5bmMgKCkgPT4ge1xuICAgIChhd2FpdCBhZGIuZ2V0QXBpTGV2ZWwoKSkuc2hvdWxkLmVxdWFsKGFwaUxldmVsKTtcbiAgfSk7XG4gIGl0KCdnZXRQbGF0Zm9ybVZlcnNpb24gc2hvdWxkIGdldCBjb3JyZWN0IHBsYXRmb3JtIHZlcnNpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgKGF3YWl0IGFkYi5nZXRQbGF0Zm9ybVZlcnNpb24oKSkuc2hvdWxkLmVxdWFsKHBsYXRmb3JtVmVyc2lvbik7XG4gIH0pO1xuICBpdCgnYXZhaWxhYmxlSU1FcyBzaG91bGQgZ2V0IGxpc3Qgb2YgYXZhaWxhYmxlIElNRXMnLCBhc3luYyAoKSA9PiB7XG4gICAgKGF3YWl0IGFkYi5hdmFpbGFibGVJTUVzKCkpLnNob3VsZC5oYXZlLmxlbmd0aC5hYm92ZSgwKTtcbiAgfSk7XG4gIGl0KCdlbmFibGVkSU1FcyBzaG91bGQgZ2V0IGxpc3Qgb2YgZW5hYmxlZCBJTUVzJywgYXN5bmMgKCkgPT4ge1xuICAgIChhd2FpdCBhZGIuZW5hYmxlZElNRXMoKSkuc2hvdWxkLmhhdmUubGVuZ3RoLmFib3ZlKDApO1xuICB9KTtcbiAgaXQoJ2RlZmF1bHRJTUUgc2hvdWxkIGdldCBkZWZhdWx0IElNRScsIGFzeW5jICgpID0+IHtcbiAgICBkZWZhdWx0SU1Fcy5zaG91bGQuaW5jbHVkZShhd2FpdCBhZGIuZGVmYXVsdElNRSgpKTtcbiAgfSk7XG4gIGl0KCdlbmFibGVJTUUgYW5kIGRpc2FibGVJTUUgc2hvdWxkIGVuYWJsZSBhbmQgZGlzYmxlIElNRScsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBhZGIuZGlzYWJsZUlNRShJTUUpO1xuICAgIChhd2FpdCBhZGIuZW5hYmxlZElNRXMoKSkuc2hvdWxkLm5vdC5pbmNsdWRlKElNRSk7XG4gICAgYXdhaXQgYWRiLmVuYWJsZUlNRShJTUUpO1xuICAgIChhd2FpdCBhZGIuZW5hYmxlZElNRXMoKSkuc2hvdWxkLmluY2x1ZGUoSU1FKTtcbiAgICBhd2FpdCBhZGIuZW5hYmxlZElNRXMoKTtcbiAgfSk7XG4gIGl0KCdwcm9jZXNzRXhpc3RzIHNob3VsZCBiZSBhYmxlIHRvIGZpbmQgdWkgcHJvY2VzcycsIGFzeW5jICgpID0+IHtcbiAgICAoYXdhaXQgYWRiLnByb2Nlc3NFeGlzdHMoJ2NvbS5hbmRyb2lkLnN5c3RlbXVpJykpLnNob3VsZC5iZS50cnVlO1xuICB9KTtcbiAgaXQoJ3Bpbmcgc2hvdWxkIHJldHVybiB0cnVlJywgYXN5bmMgKCkgPT4ge1xuICAgIChhd2FpdCBhZGIucGluZygpKS5zaG91bGQuYmUudHJ1ZTtcbiAgfSk7XG4gIGl0KCdnZXRQSURzQnlOYW1lIHNob3VsZCByZXR1cm4gcGlkcycsIGFzeW5jICgpID0+IHtcbiAgICAoYXdhaXQgYWRiLmdldFBJRHNCeU5hbWUoJ20uYW5kcm9pZC5waG9uZScpKS5zaG91bGQuaGF2ZS5sZW5ndGguYWJvdmUoMCk7XG4gIH0pO1xuICBpdCgna2lsbFByb2Nlc3Nlc0J5TmFtZSBzaG91bGQga2lsbCBwcm9jZXNzJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGFkYi5pbnN0YWxsKGNvbnRhY3RNYW5hZ2VyUGF0aCk7XG4gICAgYXdhaXQgYWRiLnN0YXJ0QXBwKHtwa2csIGFjdGl2aXR5fSk7XG4gICAgYXdhaXQgYWRiLmtpbGxQcm9jZXNzZXNCeU5hbWUocGtnKTtcbiAgICAoYXdhaXQgYWRiLmdldFBJRHNCeU5hbWUocGtnKSkuc2hvdWxkLmhhdmUubGVuZ3RoKDApO1xuICB9KTtcbiAgaXQoJ2tpbGxQcm9jZXNzQnlQSUQgc2hvdWxkIGtpbGwgcHJvY2VzcycsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBhZGIuaW5zdGFsbChjb250YWN0TWFuYWdlclBhdGgpO1xuICAgIGF3YWl0IGFkYi5zdGFydEFwcCh7cGtnLCBhY3Rpdml0eX0pO1xuICAgIGxldCBwaWRzID0gYXdhaXQgYWRiLmdldFBJRHNCeU5hbWUocGtnKTtcbiAgICBwaWRzLnNob3VsZC5oYXZlLmxlbmd0aC5hYm92ZSgwKTtcbiAgICBhd2FpdCBhZGIua2lsbFByb2Nlc3NCeVBJRChwaWRzWzBdKTtcbiAgICAoYXdhaXQgYWRiLmdldFBJRHNCeU5hbWUocGtnKSkubGVuZ3RoLnNob3VsZC5lcXVhbCgwKTtcbiAgfSk7XG4gIGl0KCdzaG91bGQgZ2V0IGRldmljZSBsYW5ndWFnZSBhbmQgY291bnRyeScsIGFzeW5jICgpID0+IHtcbiAgICBbJ2VuJywgJ2ZyJ10uc2hvdWxkLmNvbnRhaW4oYXdhaXQgYWRiLmdldERldmljZVN5c0xhbmd1YWdlKCkpO1xuICAgIFsnVVMnLCAnRU5fVVMnLCAnRU4nLCAnRlInXS5zaG91bGQuY29udGFpbihhd2FpdCBhZGIuZ2V0RGV2aWNlU3lzQ291bnRyeSgpKTtcbiAgfSk7XG4gIGl0KCdzaG91bGQgc2V0IGRldmljZSBsYW5ndWFnZSBhbmQgY291bnRyeScsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBhZGIuc2V0RGV2aWNlU3lzTGFuZ3VhZ2UoJ2ZyJyk7XG4gICAgYXdhaXQgYWRiLnNldERldmljZVN5c0NvdW50cnkoJ2ZyJyk7XG4gICAgYXdhaXQgYWRiLnJlYm9vdCgpO1xuICAgIGF3YWl0IGFkYi5nZXREZXZpY2VTeXNMYW5ndWFnZSgpLnNob3VsZC5ldmVudHVhbGx5LmVxdWFsKCdmcicpO1xuICAgIGF3YWl0IGFkYi5nZXREZXZpY2VTeXNDb3VudHJ5KCkuc2hvdWxkLmV2ZW50dWFsbHkuZXF1YWwoJ0ZSJyk7XG4gICAgLy8gY2xlYW51cFxuICAgIGF3YWl0IGFkYi5zZXREZXZpY2VTeXNMYW5ndWFnZSgnZW4nKTtcbiAgICBhd2FpdCBhZGIuc2V0RGV2aWNlU3lzQ291bnRyeSgndXMnKTtcbiAgfSk7XG4gIGl0KCdzaG91bGQgZm9yd2FyZCB0aGUgcG9ydCcsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBhZGIuZm9yd2FyZFBvcnQoNDcyNCwgNDcyNCk7XG4gIH0pO1xuICBpdCgnc2hvdWxkIHJlbW92ZSBmb3J3YXJkZWQgcG9ydCcsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBhZGIuZm9yd2FyZFBvcnQoODIwMCwgNjc5MCk7XG4gICAgKGF3YWl0IGFkYi5hZGJFeGVjKFtgZm9yd2FyZGAsIGAtLWxpc3RgXSkpLnNob3VsZC5jb250YWluKCd0Y3A6ODIwMCcpO1xuICAgIGF3YWl0IGFkYi5yZW1vdmVQb3J0Rm9yd2FyZCg4MjAwKTtcbiAgICAoYXdhaXQgYWRiLmFkYkV4ZWMoW2Bmb3J3YXJkYCwgYC0tbGlzdGBdKSkuc2hvdWxkLm5vdC5jb250YWluKCd0Y3A6ODIwMCcpO1xuXG4gIH0pO1xuICBpdCgnc2hvdWxkIHN0YXJ0IGxvZ2NhdCBmcm9tIGFkYicsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBhZGIuc3RhcnRMb2djYXQoKTtcbiAgICBsZXQgbG9ncyA9IGFkYi5sb2djYXQuZ2V0TG9ncygpO1xuICAgIGxvZ3Muc2hvdWxkLmhhdmUubGVuZ3RoLmFib3ZlKDApO1xuICAgIGF3YWl0IGFkYi5zdG9wTG9nY2F0KCk7XG4gIH0pO1xuICBkZXNjcmliZSgnYXBwIHBlcm1pc3Npb25zJywgYXN5bmMgKCkgPT4ge1xuICAgIGJlZm9yZShhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgZGV2aWNlQXBpTGV2ZWwgPSBhd2FpdCBhZGIuZ2V0QXBpTGV2ZWwoKTtcbiAgICAgIGlmIChkZXZpY2VBcGlMZXZlbCA8IDIzKSB7XG4gICAgICAgIC8vdGVzdCBzaG91bGQgc2tpcCBpZiB0aGUgZGV2aWNlIEFQSSA8IDIzXG4gICAgICAgIHRoaXMuc2tpcCgpO1xuICAgICAgfVxuICAgICAgbGV0IGlzSW5zdGFsbGVkID0gYXdhaXQgYWRiLmlzQXBwSW5zdGFsbGVkKCdpby5hcHBpdW0uYW5kcm9pZC5hcGlzJyk7XG4gICAgICBpZiAoaXNJbnN0YWxsZWQpIHtcbiAgICAgICAgYXdhaXQgYWRiLnVuaW5zdGFsbEFwaygnaW8uYXBwaXVtLmFuZHJvaWQuYXBpcycpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgaW5zdGFsbCBhbmQgZ3JhbnQgYWxsIHBlcm1pc3Npb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgYXBpRGVtb3MgPSBwYXRoLnJlc29sdmUocm9vdERpciwgJ3Rlc3QnLFxuICAgICAgICAgICdmaXh0dXJlcycsICdBcGlEZW1vcy1kZWJ1Zy5hcGsnKTtcbiAgICAgIGF3YWl0IGFkYi5pbnN0YWxsKGFwaURlbW9zKTtcbiAgICAgIChhd2FpdCBhZGIuaXNBcHBJbnN0YWxsZWQoJ2lvLmFwcGl1bS5hbmRyb2lkLmFwaXMnKSkuc2hvdWxkLmJlLnRydWU7XG4gICAgICBhd2FpdCBhZGIuZ3JhbnRBbGxQZXJtaXNzaW9ucygnaW8uYXBwaXVtLmFuZHJvaWQuYXBpcycpO1xuICAgICAgbGV0IHJlcXVlc3RlZFBlcm1pc3Npb25zID0gYXdhaXQgYWRiLmdldFJlcVBlcm1pc3Npb25zKCdpby5hcHBpdW0uYW5kcm9pZC5hcGlzJyk7XG4gICAgICBleHBlY3QoYXdhaXQgYWRiLmdldEdyYW50ZWRQZXJtaXNzaW9ucygnaW8uYXBwaXVtLmFuZHJvaWQuYXBpcycpKS50by5oYXZlLm1lbWJlcnMocmVxdWVzdGVkUGVybWlzc2lvbnMpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcmV2b2tlIHBlcm1pc3Npb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhZGIucmV2b2tlUGVybWlzc2lvbignaW8uYXBwaXVtLmFuZHJvaWQuYXBpcycsICdhbmRyb2lkLnBlcm1pc3Npb24uUkVDRUlWRV9TTVMnKTtcbiAgICAgIGV4cGVjdChhd2FpdCBhZGIuZ2V0R3JhbnRlZFBlcm1pc3Npb25zKCdpby5hcHBpdW0uYW5kcm9pZC5hcGlzJykpLnRvLm5vdC5oYXZlLm1lbWJlcnMoWydhbmRyb2lkLnBlcm1pc3Npb24uUkVDRUlWRV9TTVMnXSk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBncmFudCBwZXJtaXNzaW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYWRiLmdyYW50UGVybWlzc2lvbignaW8uYXBwaXVtLmFuZHJvaWQuYXBpcycsICdhbmRyb2lkLnBlcm1pc3Npb24uUkVDRUlWRV9TTVMnKTtcbiAgICAgIGV4cGVjdChhd2FpdCBhZGIuZ2V0R3JhbnRlZFBlcm1pc3Npb25zKCdpby5hcHBpdW0uYW5kcm9pZC5hcGlzJykpLnRvLmluY2x1ZGUubWVtYmVycyhbJ2FuZHJvaWQucGVybWlzc2lvbi5SRUNFSVZFX1NNUyddKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuIl0sInNvdXJjZVJvb3QiOiIuLi8uLi8uLiJ9
